/**
* Copyright (c) 2015 YongWoo, Jeon <i.nevalose@gmail.com> (http://mixed.kr/).
* @license MIT
*
* jsmocktool is Javascript Mock Tool of RSpec Style.
* https://github.com/mixed/jsmocktool
*
* @version 1.3.0
*/

!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){r(1),r(3),r(2),r(4),r(6),r(5),r(7),t.exports=r(8)},function(t,e){"use strict";t.exports="undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")()},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(1),c=n(i),f=function(){function t(e,r){o(this,t),this.createTestDouble(e,r)}return a(t,[{key:"createTestDouble",value:function(t,e){if(this.returnValue="_js_testDouble_none",this.testDoubleType=e,"string"==typeof t)this.makeEnableObj(t,e);else{if("object"!==("undefined"==typeof t?"undefined":u(t))&&"function"!=typeof t)throw new Error("Name of "+this.type+" is incorrect.\n			The Type only have String or Object or Function.");this.testDoubleObj=t}}},{key:"getTestDouble",value:function(){return"object"===this.testDoubleType?this.testDoubleObj:this.testDoubleObj.prototype}},{key:"makeEnableObj",value:function(t,e){var r=t.split("."),n=r[0],o=c["default"];r.length>1&&(r.splice(0,r.length-1).forEach(function(t){"undefined"==typeof o[t]&&(o[t]={}),o=o[t]}),n=r[r.length-1]);var u=o[n];this.testDoubleObj=u,"object"!==e||u?"instance"!==e||u||(this.testDoubleObj=o[n]=function(){},this.testDoubleObj.prototype=o[n].prototype={}):this.testDoubleObj=o[n]={}}}]),t}();e["default"]=f},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.mock=e.stub=void 0;var o=r(7),u=n(o),a=r(4),i=n(a);e.stub=u["default"],e.mock=i["default"]},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t,e){return this instanceof b?void this.createTestDouble(t,e):new b(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){var r=[],n=!0,o=!1,u=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(c){o=!0,u=c}finally{try{!n&&i["return"]&&i["return"]()}finally{if(o)throw u}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e["default"]=i;var l=r(6),s=n(l),h=r(2),y=n(h),b=function(t){function e(t){var r=arguments.length<=1||void 0===arguments[1]?"object":arguments[1];o(this,e);var n=u(this,Object.getPrototypeOf(e).call(this,t,r));return n.type="Mock",n}return a(e,t),f(e,[{key:"should_receive",value:function(t){return s["default"].getMethod(this.getTestDouble(),t)}},{key:"verify",value:function(t){var e=s["default"].getData(this.getTestDouble()).get(t);if(e){if(0===e.record.total)throw new Error(t+" isn't called.");return e.record}throw new Error(t+" isn't method.")}},{key:"verify_all",value:function(){var t=this,e=s["default"].getData(this.getTestDouble()),r={};return e.forEach(function(e,n){"current_obj"!==n&&(r[n]=t.verify(n))}),r}},{key:"reset",value:function(t){var e=s["default"].getData(this.getTestDouble());e.get(t).record={total:0,param:{}}}},{key:"reset_all",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=s["default"].getData(this.getTestDouble())[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var u=c(n.value,2),a=u[0],i=u[1];"current_obj"!==a&&(i.record={total:0,param:{}})}}catch(f){e=!0,r=f}finally{try{!t&&o["return"]&&o["return"]()}finally{if(e)throw r}}}}]),e}(y["default"]);i.OBJECT="object",i.INSTANCE="instance",i.anything=function(){return"_js_mock_anything_param"}},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){var r=[],n=!0,o=!1,u=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(c){o=!0,u=c}finally{try{!n&&i["return"]&&i["return"]()}finally{if(o)throw u}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function(){function t(e,n){r(this,t),this.excuteObjs=new Map,this.record={total:0,param:{}},this.currentParam=this.transformParamToString([]),this.excuteObjs.set(this.currentParam,new Map),this.setup(e,n)}return o(t,[{key:"transformParamToString",value:function(t){return JSON.stringify(t)}},{key:"setup",value:function(t,e){var r=this,o=t;o[e]=function(){for(var t=arguments.length,e=Array(t),o=0;t>o;o++)e[o]=arguments[o];r.record.total++;var u=r.transformParamToString(e);r.record.param[u]?r.record.param[u]+=1:r.record.param[u]=1;var a=r.excuteObjs.get(u);if(a){var i=a.get("type"),c=a.get("excute");if("function"===i)return c.apply(a,e);if("exception"===i)throw c;if("return"===i)return c}else{var f=!0,l=!1,s=void 0;try{for(var h,y=r.excuteObjs[Symbol.iterator]();!(f=(h=y.next()).done);f=!0){var b=n(h.value,2),p=b[1],d=p.get("arg");if(d&&d.length===e.length&&!d.find(function(t,r){return t!==e[r]&&"_js_mock_anything_param"!==t}))return p.get("excute")}}catch(v){l=!0,s=v}finally{try{!f&&y["return"]&&y["return"]()}finally{if(l)throw s}}}}}},{key:"with_param",value:function(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];return this.currentParam=this.transformParamToString(e),this.excuteObjs.set(this.currentParam,(new Map).set("arg",e)),this}},{key:"and_template",value:function(t,e){this.excuteObjs.get(this.currentParam).set("type",t).set("excute",e),this.currentParam=this.transformParamToString([])}},{key:"and_return",value:function(t){this.and_template("return",t)}},{key:"and_function",value:function(t){this.and_template("function",t)}},{key:"and_throw",value:function(t){this.and_template("exception",t)}}]),t}();e["default"]=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(5),u=n(o);e["default"]={storage:[],createData:function(t){var e=(new Map).set("current_obj",t);return this.storage.push(e),e},createMethod:function(t,e){return new u["default"](t,e)},getData:function(t){var e=this.storage.find(function(e){return e.get("current_obj")===t});return e||this.createData(t)},getMethod:function(t,e){var r=this.getData(t),n=r.get(e);return n||(n=this.createMethod(t,e),r.set(e,n)),n}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t){p["default"].console&&console.warn&&console.warn(t)}function c(t,e){return this instanceof d?void this.createTestDouble(t,e):new d(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var f=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e["default"]=c;var l=r(8),s=n(l),h=r(2),y=n(h),b=r(1),p=n(b),d=function(t){function e(t){var r=arguments.length<=1||void 0===arguments[1]?"object":arguments[1];o(this,e);var n=u(this,Object.getPrototypeOf(e).call(this,t,r));return n.type="Stub",i("[WARN] : Deprecated Stub. You should be change to Mock."),n}return a(e,t),f(e,[{key:"should_receive",value:function(t){var e=this;return this.getTestDouble()[t]=function(){return"_js_stub_none"!==e.returnValue?e.returnValue:void 0},new s["default"](this)}}]),e}(y["default"]);c.OBJECT="object",c.INSTANCE="instance"},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e){r(this,t),this.stub=e}return n(t,[{key:"and_return",value:function(t){this.stub.returnValue=t}}]),t}();e["default"]=o}]);
//# sourceMappingURL=jsmocktool.js.map